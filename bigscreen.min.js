// BigScreen v2.0.1 - 2013-06-15 - Apache 2.0 License
!function(a,b,c){"use strict";function d(a){var b=null;if("VIDEO"===a.tagName)b=a;else{var c=a.getElementsByTagName("video");c[0]&&(b=c[0])}return b}function e(a){var b=d(a);if(b&&b.webkitEnterFullscreen){try{b.readyState<b.HAVE_METADATA?(b.addEventListener("loadedmetadata",function e(){b.removeEventListener("loadedmetadata",e,!1),b.webkitEnterFullscreen(),l=!!b.getAttribute("controls")},!1),b.load()):(b.webkitEnterFullscreen(),l=!!b.getAttribute("controls")),k=b}catch(c){return q("not_supported",a)}return!0}return q(void 0===j.request?"not_supported":"not_enabled",a)}function f(){r.element||(p(),h())}function g(){c&&"webkitfullscreenchange"===j.change&&a.addEventListener("resize",f,!1)}function h(){c&&"webkitfullscreenchange"===j.change&&a.removeEventListener("resize",f,!1)}var i="undefined"!=typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element,j=function(){var a=b.createElement("video"),c={request:["requestFullscreen","webkitRequestFullscreen","webkitRequestFullScreen","mozRequestFullScreen"],exit:["exitFullscreen","webkitExitFullscreen","webkitCancelFullScreen","mozCancelFullScreen"],enabled:["fullscreenEnabled","webkitFullscreenEnabled","mozFullScreenEnabled"],element:["fullscreenElement","webkitFullscreenElement","webkitCurrentFullScreenElement","mozFullScreenElement"],change:["fullscreenchange","webkitfullscreenchange","mozfullscreenchange"],error:["fullscreenerror","webkitfullscreenerror","mozfullscreenerror"]},d={};for(var e in c)for(var f=0,g=c[e].length;g>f;f++)if(c[e][f]in a||c[e][f]in b||"on"+c[e][f]in b){d[e]=c[e][f];break}return d}(),k=null,l=null,m=function(){},n=[],o=function(a){var b=n[n.length-1];(a!==b.element&&a!==k||!b.hasEntered)&&(1===n.length&&r.onenter(r.element),b.enter.call(b.element,a||b.element),b.hasEntered=!0,"VIDEO"===a.tagName&&(k=a))},p=function(){k&&!l&&(k.setAttribute("controls","controls"),k.removeAttribute("controls")),k=null,l=null;var a=n.pop();a&&(a.exit.call(a.element),r.element||(n.forEach(function(a){a.exit.call(a.element)}),n=[],r.onexit()))},q=function(a,b){if(n.length>0){var c=n.pop();b=b||c.element,c.error.call(b,a),r.onerror(b,a)}},r={request:function(a,d,f,g){if(a=a||b.body,n.push({element:a,enter:d||m,exit:f||m,error:g||m}),void 0===j.request)return e(a);if(c&&b[j.enabled]===!1)return e(a);if(c&&void 0===j.enabled)return j.enabled="webkitFullscreenEnabled",a[j.request](),setTimeout(function(){b[j.element]?b[j.enabled]=!0:(b[j.enabled]=!1,e(a))},250),void 0;try{/5\.1[\.\d]* Safari/.test(navigator.userAgent)?a[j.request]():a[j.request](i&&Element.ALLOW_KEYBOARD_INPUT),setTimeout(function(){b[j.element]||q(c?"not_enabled":"not_allowed",a)},100)}catch(h){q("not_enabled",a)}},exit:function(){h(),b[j.exit]()},toggle:function(a,b,c,d){r.element?r.exit():r.request(a,b,c,d)},videoEnabled:function(a){if(r.enabled)return!0;a=a||b.body;var c=d(a);return c&&void 0!==c.webkitSupportsFullscreen?c.readyState<c.HAVE_METADATA?"maybe":c.webkitSupportsFullscreen:!1},onenter:m,onexit:m,onchange:m,onerror:m};try{Object.defineProperties(r,{element:{enumerable:!0,get:function(){return k&&k.webkitDisplayingFullscreen?k:b[j.element]||null}},enabled:{enumerable:!0,get:function(){return"webkitCancelFullScreen"!==j.exit||c?b[j.enabled]||!1:!0}}})}catch(s){r.element=null,r.enabled=!1}j.change&&b.addEventListener(j.change,function(){if(r.onchange(r.element),r.element){var a=n[n.length-2];a&&a.element===r.element?p():(o(r.element),g())}else p()},!1),b.addEventListener("webkitbeginfullscreen",function(a){r.onchange(a.srcElement),o(a.srcElement)},!0),b.addEventListener("webkitendfullscreen",function(a){r.onchange(a.srcElement),p(a.srcElement)},!0),j.error&&b.addEventListener(j.error,function(){q("not_allowed")},!1),a.BigScreen=r}(window,document,self!==top);